[На главную](../../index.md)

# Новое  в версии. Релиз 262 от 31.05.2023

**Условные обозначения:**
 >[номер] - номер заявки во внутренней системе учета заявок компании "БУХта".

#### Содержание: 

- Зарплата
- Отчеты
- Настройка прав доступов

## Добавление новой возможности

#### 24976
Сохранять в реестре положение и размер формы для настройки колонок списка.

#### 24981
В соответствии __с Приказом Росстата от 26.12.2022 N 978__ вводится новый формат формы стат.наблюдения Форма N 1 "Сведения о распределении численности работников по размерам заработной платы" (код формы по ОКУД 0606038).
В БУХте добавлена возможность печатать (форма __Стандартный. Сведения о численности по з/п Форма1__, шаблон Стандартный. Сведения о численности по з/п Форма1__) и выгружать (формы __Стандартная. Архивный отчет в электронном виде__, __Стандартная. Архивный отчет в эл.виде (Стат.формы)__) отчет Форма N 1 в новом формате. 
Добавлена возможность на экране формы выбрать список подразделений, по которым составлять отчет; следует составлять отдельные отчеты по обособленным подразделениям и выгружать в файл каждый из них.

## Усовершенствование

#### 24974 (продолжение 24851 и 24962)
Доработан режим сбора и выгрузки в `xml-файл` отчета __6НДФЛ__ в новом формате начиная с отчетности за 1 квартал 2023 г., в соответствии __с Приказом ФНС от 29.09.2022 №ЕД-7-11/881@__ (форма __З/П. Экспорт в XML-файл для ГНИ 2023__):

Добавлена возможность сбора данных для строк __030-032__ Раздела 1 фомы 6НДФЛ (сумма налога возвращенная): на экране формы на закладке __Заполнение 6НДФЛ__ добавлен признак __Выделять возвращенный НДФЛ__, если признак проставлен, открывается поле для указания списка или фильтра для сбора данных и признак "сторно", который следует проставить, если собранные суммы следует взять с противоположным знаком.
Собранные данные по возврату НДФЛ можно увидеть в карточке редактирования строки 6НДФЛ в отдельной таблице, при выгрузке 6НДФЛ в файл эти данные выгружаются в Разделе 1 в тэг `<СумНалВоз>`.

#### 24977
Доработан алгоритм расчета НДФЛ: в соответствии __с письмом Минфина 03-04-06/10700 от 09.02.2023г.,__ доход для определения применения стандартных вычетов определяется по дате выплаты.

#### 24983
Доработан режим составления Уведомлений об исчисленных суммах налогов (форма __Стандартная. Составление Уведомлений в ФНС__):

1. подготовлен проект закона, в соответствии с которым с июня 2023 г можно подавать уведомления дважды в месяц, а именно можно добровольно направить промежуточное уведомление не позднее 12-го числа:
12-е число - с 23-го числа предыдущего месяца по 9-е число текущего месяца, 25-е число - С 23-го числа предыдущего месяца по 22-е число текущего месяца.
Поэтому исправлен алгоритм определения периода для выюора документов по дате моздания Уведомления.

2. добавлена возможность в запросе по докспец, зарплате или проводке определять поле Примечание и заполнять его в докспец при создании документа Уведомление.

Доработан режим выгрузки в файл Уведомлений об исчисленных суммах налогов (форма __Стандартная. Экспорт Уведомлений в ФНС в XML__):
1. добавлена возможность выбора запроса по докспец, по которому следует выгружать данные в файл: на экране добавлено поле для выбора запроса по докспец;
2. добавлена возможность в запросе по докспец в отдельных полях впрямую указать Год (поле Год), период (поле __Период__) и месяц (поле __НомерМесКварт__) для выгрузки в файл в тэгах Год, Период и НомерМесКварт (пример - запрос __Стандартный. Уведомление в ФНС в xml.ДокспецПериод__).

#### 24984
В режиме составления платежных ведомостей (форма __Стандартная. Составление платежных ведомостей__) на экране выровнено положение текста со списком подразделений при выборе Подразделение-список.

#### 24993
При превышении определенного количества пользовательских полей в справочниках _(более 100 полей)_, которые разделены по видам, а также при превышении определенного количества самих видов _(более 100 видов)_, в случае, если настройка прав доступов выполнялась для каждого поля _(Выброчно для раздела)_, происоходила медленная загрузка программы. Произведено ускорение запуска программы.

## Исправление ошибок

## Информация для разработчиков

#### 24979
К __RunTime__ формам запросам параметров, для отчетов __Сальдо-Оборот__ и __Оборотная ведомость__, подключен VBScript.
Например, если мы выбираем на одном субконто -  __ТМЦ__, а на другом хотим чтобы отображались только партии этого __ТМЦ__, достаточно добавить скрипт:

```
Sub Subconto3LookupEditOnChange 'Субконто 3 значение'
  if Subconto3LookupEdit.SubcontoType="ТМЦ" then
    Param.Values("ТМЦ")=Subconto3LookupEdit.Value
  end if
End Sub

Sub FormOnAfterLoadData ''
  if Subconto3LookupEdit.SubcontoType="ТМЦ" then
    Param.Values("ТМЦ")=Subconto3LookupEdit.Value
  end if
End Sub
```
>Тем самым, мы, заставляем форму со списком партий отображать партии по зраранее выбранному ТМЦ.

#### 24994
Добавлена возможность для ведения лога-приложения. Для этого программу БУХта нужно запускать с параметром __-MAKELOG__.
В таком случае, в __журнале приложений Windows__ будут доступны определенные действия пользователя в программе.
Для записи события в Журнал нужно использовать процедуру: 

`WriteLogLine(const Source, Msg: string; EventType: Word);`

>Режим находится в стадии дополнения.
>>Если программа запущена с параметром __-MAKELOG__ и __включено__ ведение статистики, в статистку включаются запуски внутренних форм программного комплекса. В колонке __Объект__, такие объекты отмечены значением __InternalForm__.

#### 24996
В справочнике ТМЦ, для индекса __IX_ТМЦ_Номер__, снят признак __Unique__.
>Индекс будет пересоздан во время синхронизации.

[подробнее о конфигурации зарплата](Стандартная_Зарплата.htm)

>[скачать версию **Buhta20230531.zip**](Buhta20230531.zip)
